---
- name: Palo Alto Baseline Compliance
  hosts: panorama
  gather_facts: false

  tasks:
    - name: Apply baseline configuration
      ansible.builtin.include_role:
        name: baseline_config
      tags:
        - baseline
        - compliance

    - name: Commit changes
      paloaltonetworks.panos.panos_commit_panorama:
        provider: "{{ provider }}"
        description: "{{ commit_description }} - Baseline compliance"
      when:
        - commit_changes | default(true) | bool
        - not ansible_check_mode
      tags:
        - commit
